<h1>Quartals-Ranking vom <%=short_date(@date)%> </h1>
<p class="headlinks"><%= link_to "<<Vorheriges Jahr", :action => "last_3_months", :date => @date - 1.year %> &nbsp; 
<%= link_to  "<Vorheriger Monat", :action => "last_3_months", :date => @date - 1.month %> &nbsp; 
<%= link_to  ">Nächster Monat", :action => "last_3_months", :date => @date + 1.month %> &nbsp; 
<%= link_to  ">>Nächstes Jahr", :action => "last_3_months", :date => @date + 1.year %></p>
<table class="ranking">
	<tr >
		<th>Rang</th>
		<th class="string <%= cyc_color%>">Jasser</th>
		<th <%=cyc_color_class %>><%= link_to "Spiele", :id => @date, :order => "spiele" %></th>
		<th <%=cyc_color_class %>><%= link_to "Differenz", :id => @date, :order => "differenz" %></th>
		<th <%=cyc_color_class %>><%= link_to "Schnitt", :id => @date, :order => "schnitt" %></th>
		<th <%=cyc_color_class %>><%= link_to "Max", :id => @date, :order => "maximum" %></th>
		<th <%=cyc_color_class %>><%= link_to "Rösi", :id => @date, :order => "roesi" %></th>
		<th <%=cyc_color_class %>><%= link_to "2xRösi", :id => @date, :order => "droesi" %></th>
		<th <%=cyc_color_class %>><%= link_to "Versenkt", :id => @date, :order => "versenkt" %></th>
		<th <%=cyc_color_class %>><%= link_to "Match", :id => @date, :order => "gematcht" %></th>
		<th <%=cyc_color_class %>><%= link_to "H.Match", :id => @date, :order => "huebimatch" %></th>
		<th <%=cyc_color_class %>><%= link_to "Dähler-Ris", :id => @date, :order => "chimiris" %></th>
	</tr>
	<% if @ranking.size > 0 -%>
		<% for stat in @ranking -%>
			<% reset_cycle("colors") -%>
			<tr <% if @rank==0 || @rank==3 %>class="trennung_top"<% end %> >
				<td><%= n 0, @rank +=1 %></td>
				<td class="string <%= cyc_color%>"><%= stat["jasser"].name %></td>
				<td <%=cyc_color_class %>><%= n 0, stat["spiele"] %></td>
				<td <%=cyc_color_class %>><%= n 0, stat["differenz"] %></td>
				<td <%=cyc_color_class %>><%= n 2, stat["schnitt"] %></td>
				<td <%=cyc_color_class %>><%= n 0, stat["maximum"] %></td>
				<% for col in @additional_columns -%>
					<td <%=cyc_color_class %>><%= n 0, stat[col] %></td>
				<% end -%>
			<tr>
		<% end -%>
		<tr class="trennung_top">
			<% reset_cycle("colors") -%>
			<td></td>
			<td class="string <%= cyc_color%>">Total</td>
			<td <%=cyc_color_class %>><%= @totals["spiele"] %></td>
			<td <%=cyc_color_class %>><%= @totals["differenz"] %></td>
			<td <%=cyc_color_class %>> </td>
			<td <%=cyc_color_class %>><%= @totals["maximum"] %></td>
			<% for col in @additional_columns -%>
				<td <%=cyc_color_class %>><%= n 0, @totals[col] %></td>
			<% end -%>
		</tr>
		<tr>
			<td></td>
			<% reset_cycle("colors") -%>
			<td class="string <%= cyc_color%>">Schnitt</td>
			<td <%=cyc_color_class %>><%= n 2, @totals["spiele"]/@rank %></td>
			<td <%=cyc_color_class %>><%= n 2, @totals["differenz"]/@rank %></td>
			<td <%=cyc_color_class %>><%= n 2, @totals["differenz"]/@totals["spiele"].to_f %></td>
			<td <%=cyc_color_class %>> </td>
			<% for col in @additional_columns -%>
				<td <%=cyc_color_class %>><%= n 2, @totals[col]/@rank %></td>
			<% end -%>
		</tr>
	<% else %>
		<tr>
			<td colspan=12 style="padding:15px;text-align:center;">In diesem Jahr wurde kein Spiel eingetragen</td>
		</tr>
	<% end -%>
</table>
